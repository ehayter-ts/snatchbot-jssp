metadata={systemName:"SnatchBot_ChatBot",displayName:"SnatchBot ChatBot",description:"SnatchBot ChatBot",configuration:{}},ondescribe=async function({}){postSchema({objects:{message:{displayName:"Message",description:"Represent a text reply",properties:{botURL:{displayName:"Bot URL",type:"string"},inputText:{displayName:"Input Text",type:"string"},outputText:{displayName:"Output Text",type:"string"},userID:{displayName:"User ID",type:"string"}},methods:{postText:{displayName:"Post Text",type:"execute",inputs:["botURL","inputText","userID"],outputs:["outputText"]},startChat:{displayName:"Start Chat",type:"execute",inputs:["botURL"],outputs:["userID","outputText"]},restartChat:{displayName:"Restart Chat",type:"execute",inputs:["botURL"],outputs:["userID","outputText"]}}}}})},onexecute=async function({objectName:t,methodName:e,parameters:s,properties:a,configuration:r}){switch(t){case"message":await async function(t,e,s){switch(t){case"postText":await function(t,e){return new Promise((e,s)=>{var a={message:t.inputText.toString()},r=`${t.botURL}?user_id=${t.userID}`,o=new XMLHttpRequest;o.onreadystatechange=function(){try{if(4!==o.readyState)return;if(200!==o.status)throw new Error("Failed with status "+o.status);var t=JSON.parse(o.responseText);postResult({outputText:t.messages[0].message}),e()}catch(t){s()}},o.open("POST",r),o.send(JSON.stringify(a))})}(e);break;case"startChat":case"restartChat":await function(t,e){return new Promise((e,s)=>{var a={message:""},r="guest_"+Date.now(),o=`${t.botURL}?user_id=${r}`,n=new XMLHttpRequest;n.onreadystatechange=function(){try{if(4!==n.readyState)return;if(200!==n.status)throw new Error("Failed with status "+n.status);var t=JSON.parse(n.responseText);postResult({outputText:t.messages[0].message.toString(),userID:r}),e()}catch(t){s()}},n.open("POST",o),n.send(JSON.stringify(a))})}(e);break;default:throw new Error("The method "+t+" is not supported.")}}(e,a);break;default:throw new Error("The object "+t+" is not supported.")}};
//# sourceMappingURL=index.js.map
